{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedhazin/Desktop/filevalut/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useAuthenticator, Authenticator } from \"@aws-amplify/ui-react\";\nimport { signOut, fetchAuthSession } from \"aws-amplify/auth\";\nimport { gsap } from \"gsap\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppContent() {\n  _s();\n  var _user$signInDetails;\n  const {\n    user\n  } = useAuthenticator(context => [context.user]);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [files, setFiles] = useState([]);\n  const cardRef = useRef();\n  const API_BASE = process.env.REACT_APP_API_BASE;\n\n  // GSAP animation\n  useEffect(() => {\n    gsap.from(cardRef.current, {\n      y: 80,\n      opacity: 0,\n      duration: 1,\n      ease: \"power3.out\"\n    });\n  }, []);\n\n  // Fetch files\n  const fetchFiles = async () => {\n    try {\n      var _session$tokens, _session$tokens$idTok;\n      const session = await fetchAuthSession();\n      const idToken = (_session$tokens = session.tokens) === null || _session$tokens === void 0 ? void 0 : (_session$tokens$idTok = _session$tokens.idToken) === null || _session$tokens$idTok === void 0 ? void 0 : _session$tokens$idTok.toString();\n      const res = await fetch(`${API_BASE}/files`, {\n        headers: {\n          Authorization: idToken\n        }\n      });\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // Upload file\n  const handleUploadClick = async () => {\n    if (!selectedFile) {\n      alert(\"Please choose a file first\");\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = async () => {\n      try {\n        var _session$tokens2, _session$tokens2$idTo;\n        const session = await fetchAuthSession();\n        const idToken = (_session$tokens2 = session.tokens) === null || _session$tokens2 === void 0 ? void 0 : (_session$tokens2$idTo = _session$tokens2.idToken) === null || _session$tokens2$idTo === void 0 ? void 0 : _session$tokens2$idTo.toString();\n        const base64String = reader.result.split(\",\")[1];\n        await fetch(`${API_BASE}/upload`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: idToken\n          },\n          body: JSON.stringify({\n            userId: user.username,\n            fileName: selectedFile.name,\n            fileContent: base64String\n          })\n        });\n        alert(\"âœ… File uploaded!\");\n        fetchFiles();\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    reader.readAsDataURL(selectedFile);\n  };\n  useEffect(() => {\n    if (user) {\n      fetchFiles();\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      ref: cardRef,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cloud File Vault\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"email\",\n        children: user === null || user === void 0 ? void 0 : (_user$signInDetails = user.signInDetails) === null || _user$signInDetails === void 0 ? void 0 : _user$signInDetails.loginId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setSelectedFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn login\",\n        onClick: handleUploadClick,\n        children: \"Upload File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        children: \"\\uD83D\\uDCC2 My Uploaded Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), files.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No files uploaded yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: files.map((file, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: file.fileName\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn logout\",\n        onClick: () => signOut(),\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"lc2c1OySPgI5xJZi6haWqIGqMC4=\", false, function () {\n  return [useAuthenticator];\n});\n_c = AppContent;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(Authenticator, {\n    hideSignUp: false,\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuthenticator","Authenticator","signOut","fetchAuthSession","gsap","jsxDEV","_jsxDEV","AppContent","_s","_user$signInDetails","user","context","selectedFile","setSelectedFile","files","setFiles","cardRef","API_BASE","process","env","REACT_APP_API_BASE","from","current","y","opacity","duration","ease","fetchFiles","_session$tokens","_session$tokens$idTok","session","idToken","tokens","toString","res","fetch","headers","Authorization","data","json","err","console","error","handleUploadClick","alert","reader","FileReader","onload","_session$tokens2","_session$tokens2$idTo","base64String","result","split","method","body","JSON","stringify","userId","username","fileName","name","fileContent","readAsDataURL","className","children","ref","_jsxFileName","lineNumber","columnNumber","signInDetails","loginId","type","onChange","e","target","onClick","style","marginTop","length","map","file","index","_c","App","hideSignUp","_c2","$RefreshReg$"],"sources":["/Users/mohamedhazin/Desktop/filevalut/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useAuthenticator, Authenticator } from \"@aws-amplify/ui-react\";\nimport { signOut, fetchAuthSession } from \"aws-amplify/auth\";\nimport { gsap } from \"gsap\";\nimport \"./App.css\";\n\nfunction AppContent() {\n  const { user } = useAuthenticator((context) => [context.user]);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [files, setFiles] = useState([]);\n  const cardRef = useRef();\n\n  const API_BASE = process.env.REACT_APP_API_BASE;\n\n  // GSAP animation\n  useEffect(() => {\n    gsap.from(cardRef.current, {\n      y: 80,\n      opacity: 0,\n      duration: 1,\n      ease: \"power3.out\",\n    });\n  }, []);\n\n  // Fetch files\n  const fetchFiles = async () => {\n    try {\n      const session = await fetchAuthSession();\n      const idToken = session.tokens?.idToken?.toString();\n\n      const res = await fetch(`${API_BASE}/files`, {\n        headers: {\n          Authorization: idToken,\n        },\n      });\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // Upload file\n  const handleUploadClick = async () => {\n    if (!selectedFile) {\n      alert(\"Please choose a file first\");\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onload = async () => {\n      try {\n        const session = await fetchAuthSession();\n        const idToken = session.tokens?.idToken?.toString();\n        const base64String = reader.result.split(\",\")[1];\n\n        await fetch(`${API_BASE}/upload`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: idToken,\n          },\n          body: JSON.stringify({\n            userId: user.username,\n            fileName: selectedFile.name,\n            fileContent: base64String,\n          }),\n        });\n\n        alert(\"âœ… File uploaded!\");\n        fetchFiles();\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    reader.readAsDataURL(selectedFile);\n  };\n\n  useEffect(() => {\n    if (user) {\n      fetchFiles();\n    }\n  }, [user]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\" ref={cardRef}>\n        <h2>Cloud File Vault</h2>\n        <p className=\"email\">{user?.signInDetails?.loginId}</p>\n\n        <input\n          type=\"file\"\n          onChange={(e) => setSelectedFile(e.target.files[0])}\n        />\n\n        <button className=\"btn login\" onClick={handleUploadClick}>\n          Upload File\n        </button>\n\n        <h3 style={{ marginTop: \"20px\" }}>ðŸ“‚ My Uploaded Files</h3>\n\n        {files.length === 0 ? (\n          <p>No files uploaded yet</p>\n        ) : (\n          <ul>\n            {files.map((file, index) => (\n              <li key={index}>{file.fileName}</li>\n            ))}\n          </ul>\n        )}\n\n        <button className=\"btn logout\" onClick={() => signOut()}>\n          Logout\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <Authenticator hideSignUp={false}>\n      <AppContent />\n    </Authenticator>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
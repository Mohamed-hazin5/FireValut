{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedhazin/Desktop/filevalut/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"react-oidc-context\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const auth = useAuth();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [files, setFiles] = useState([]);\n  const API_BASE = \"https://m6i0iltykf.execute-api.ap-south-1.amazonaws.com\";\n\n  // ðŸ”¹ Fetch files from API\n  const fetchFiles = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/files`, {\n        method: \"GET\",\n        headers: {\n          Authorization: auth.user.id_token\n        }\n      });\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(\"Error fetching files\", err);\n    }\n  };\n\n  // ðŸ”¹ Upload file\n  const handleUploadClick = async () => {\n    if (!selectedFile) {\n      alert(\"Please choose a file first\");\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = async () => {\n      try {\n        const base64String = reader.result.split(\",\")[1];\n        await fetch(`${API_BASE}/upload`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: auth.user.id_token\n          },\n          body: JSON.stringify({\n            userId: auth.user.profile.sub,\n            fileName: selectedFile.name,\n            fileContent: base64String\n          })\n        });\n        alert(\"âœ… File uploaded!\");\n        fetchFiles(); // refresh list\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    reader.readAsDataURL(selectedFile);\n  };\n\n  // Fetch files when logged in\n  useEffect(() => {\n    if (auth.isAuthenticated) {\n      fetchFiles();\n    }\n  }, [auth.isAuthenticated]);\n  if (auth.isAuthenticated) {\n    var _auth$user;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card slide-up\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Welcome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"email\",\n          children: (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.profile.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: e => setSelectedFile(e.target.files[0]),\n          style: {\n            margin: \"15px 0\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn login\",\n          onClick: handleUploadClick,\n          children: \"Upload File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          style: {\n            margin: \"20px 0\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCC2 My Uploaded Files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), files.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No files uploaded yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: files.map((file, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: file.fileName\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn logout\",\n          onClick: () => auth.removeUser(),\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card slide-up\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cloud File Vault\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn login\",\n        onClick: () => auth.signinRedirect(),\n        children: \"Login with Cognito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"juazTF1ht+V/l+XbjGQH+Ybl6+k=\", false, function () {\n  return [useAuth];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsxDEV","_jsxDEV","App","_s","auth","selectedFile","setSelectedFile","files","setFiles","API_BASE","fetchFiles","res","fetch","method","headers","Authorization","user","id_token","data","json","err","console","error","handleUploadClick","alert","reader","FileReader","onload","base64String","result","split","body","JSON","stringify","userId","profile","sub","fileName","name","fileContent","readAsDataURL","isAuthenticated","_auth$user","className","children","_jsxFileName","lineNumber","columnNumber","email","type","onChange","e","target","style","margin","onClick","length","map","file","index","removeUser","signinRedirect","_c","$RefreshReg$"],"sources":["/Users/mohamedhazin/Desktop/filevalut/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"react-oidc-context\";\nimport \"./App.css\";\n\nfunction App() {\n  const auth = useAuth();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [files, setFiles] = useState([]);\n\n  const API_BASE = \"https://m6i0iltykf.execute-api.ap-south-1.amazonaws.com\";\n\n  // ðŸ”¹ Fetch files from API\n  const fetchFiles = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/files`, {\n        method: \"GET\",\n        headers: {\n          Authorization: auth.user.id_token,\n        },\n      });\n\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(\"Error fetching files\", err);\n    }\n  };\n\n  // ðŸ”¹ Upload file\n  const handleUploadClick = async () => {\n    if (!selectedFile) {\n      alert(\"Please choose a file first\");\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onload = async () => {\n      try {\n        const base64String = reader.result.split(\",\")[1];\n\n        await fetch(`${API_BASE}/upload`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: auth.user.id_token,\n          },\n          body: JSON.stringify({\n            userId: auth.user.profile.sub,\n            fileName: selectedFile.name,\n            fileContent: base64String,\n          }),\n        });\n\n        alert(\"âœ… File uploaded!\");\n        fetchFiles(); // refresh list\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    reader.readAsDataURL(selectedFile);\n  };\n\n  // Fetch files when logged in\n  useEffect(() => {\n    if (auth.isAuthenticated) {\n      fetchFiles();\n    }\n  }, [auth.isAuthenticated]);\n\n  if (auth.isAuthenticated) {\n    return (\n      <div className=\"container\">\n        <div className=\"card slide-up\">\n          <h2>Welcome</h2>\n          <p className=\"email\">{auth.user?.profile.email}</p>\n\n          <input\n            type=\"file\"\n            onChange={(e) => setSelectedFile(e.target.files[0])}\n            style={{ margin: \"15px 0\" }}\n          />\n\n          <button className=\"btn login\" onClick={handleUploadClick}>\n            Upload File\n          </button>\n\n          <hr style={{ margin: \"20px 0\" }} />\n\n          <h3>ðŸ“‚ My Uploaded Files</h3>\n          {files.length === 0 ? (\n            <p>No files uploaded yet</p>\n          ) : (\n            <ul>\n              {files.map((file, index) => (\n                <li key={index}>{file.fileName}</li>\n              ))}\n            </ul>\n          )}\n\n          <br />\n          <button className=\"btn logout\" onClick={() => auth.removeUser()}>\n            Logout\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"card slide-up\">\n        <h2>Cloud File Vault</h2>\n        <button className=\"btn login\" onClick={() => auth.signinRedirect()}>\n          Login with Cognito\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
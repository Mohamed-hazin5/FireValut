{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction createAbortableTask(executor) {\n  const abortController = new AbortController();\n  let state = 'IN_PROGRESS';\n  const resultPromise = executor(abortController);\n  const wrappedPromise = resultPromise.then(result => {\n    state = 'SUCCESS';\n    return result;\n  }).catch(error => {\n    state = abortController.signal.aborted ? 'CANCELED' : 'ERROR';\n    throw error;\n  });\n  const operation = {\n    result: wrappedPromise,\n    cancel: () => {\n      abortController.abort();\n      state = 'CANCELED';\n    },\n    get state() {\n      return state;\n    },\n    then: wrappedPromise.then.bind(wrappedPromise),\n    catch: wrappedPromise.catch.bind(wrappedPromise),\n    finally: wrappedPromise.finally.bind(wrappedPromise)\n  };\n  return operation;\n}\nexport { createAbortableTask };","map":{"version":3,"names":["createAbortableTask","executor","abortController","AbortController","state","resultPromise","wrappedPromise","then","result","catch","error","signal","aborted","operation","cancel","abort","bind","finally"],"sources":["/Users/mohamedhazin/Desktop/filevalut/frontend/node_modules/@aws-amplify/storage/src/providers/s3/utils/createAbortableTask.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function createAbortableTask(executor) {\n    const abortController = new AbortController();\n    let state = 'IN_PROGRESS';\n    const resultPromise = executor(abortController);\n    const wrappedPromise = resultPromise\n        .then(result => {\n        state = 'SUCCESS';\n        return result;\n    })\n        .catch(error => {\n        state = abortController.signal.aborted ? 'CANCELED' : 'ERROR';\n        throw error;\n    });\n    const operation = {\n        result: wrappedPromise,\n        cancel: () => {\n            abortController.abort();\n            state = 'CANCELED';\n        },\n        get state() {\n            return state;\n        },\n        then: wrappedPromise.then.bind(wrappedPromise),\n        catch: wrappedPromise.catch.bind(wrappedPromise),\n        finally: wrappedPromise.finally.bind(wrappedPromise),\n    };\n    return operation;\n}\n"],"mappings":"AAAA;AACA;AACO,SAASA,mBAAmBA,CAACC,QAAQ,EAAE;EAC1C,MAAMC,eAAe,GAAG,IAAIC,eAAe,EAAE;EAC7C,IAAIC,KAAK,GAAG,aAAa;EACzB,MAAMC,aAAa,GAAGJ,QAAQ,CAACC,eAAe,CAAC;EAC/C,MAAMI,cAAc,GAAGD,aAAA,CAClBE,IAAI,CAACC,MAAM,IAAI;IAChBJ,KAAK,GAAG,SAAS;IACjB,OAAOI,MAAM;EACjB,CAAC,EACIC,KAAK,CAACC,KAAK,IAAI;IAChBN,KAAK,GAAGF,eAAe,CAACS,MAAM,CAACC,OAAO,GAAG,UAAU,GAAG,OAAO;IAC7D,MAAMF,KAAK;EACf,CAAC,CAAC;EACF,MAAMG,SAAS,GAAG;IACdL,MAAM,EAAEF,cAAc;IACtBQ,MAAM,EAAEA,CAAA,KAAM;MACVZ,eAAe,CAACa,KAAK,EAAE;MACvBX,KAAK,GAAG,UAAU;IACtB,CAAC;IACD,IAAIA,KAAKA,CAAA,EAAG;MACR,OAAOA,KAAK;IAChB,CAAC;IACDG,IAAI,EAAED,cAAc,CAACC,IAAI,CAACS,IAAI,CAACV,cAAc,CAAC;IAC9CG,KAAK,EAAEH,cAAc,CAACG,KAAK,CAACO,IAAI,CAACV,cAAc,CAAC;IAChDW,OAAO,EAAEX,cAAc,CAACW,OAAO,CAACD,IAAI,CAACV,cAAc;EAC3D,CAAK;EACD,OAAOO,SAAS;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}